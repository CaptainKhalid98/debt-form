<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Lead Form</title>
</head>
<body>
    <h1>Add Lead</h1>
    <form id="leadForm">
        <label for="f_fname">First Name*:</label>
        <input type="text" id="f_fname" name="f_fname" required><br><br>

        <label for="f_lname">Last Name*:</label>
        <input type="text" id="f_lname" name="f_lname" required><br><br>

        <label for="f_phone">Main Phone*:</label>
        <input type="text" id="f_phone" name="f_phone" required><br><br>

        <label for="f_mobilephone">Secondary Phone:</label>
        <input type="text" id="f_mobilephone" name="f_mobilephone"><br><br>

        <label for="f_email">Email Address*:</label>
        <input type="email" id="f_email" name="f_email" required><br><br>

        <label for="f_totaldebt">Debt Amount*:</label>
        <input type="number" id="f_totaldebt" name="f_totaldebt" required><br><br>

        <label for="f_whereyoulive">State*:</label>
        <input type="text" id="f_whereyoulive" name="f_whereyoulive" required><br><br>

        <label for="f_city">City:</label>
        <input type="text" id="f_city" name="f_city"><br><br>

        <label for="f_zip">Zip Code:</label>
        <input type="text" id="f_zip" name="f_zip"><br><br>

        <label for="f_comments">Additional Info:</label>
        <textarea id="f_comments" name="f_comments"></textarea><br><br>

        <button type="submit">Submit Lead</button>
    </form>

    <script>
        document.getElementById("leadForm").addEventListener("submit", async function(event) {
            event.preventDefault(); // Prevent form submission from refreshing the page

            const form = event.target;

            const data = {
                f_fname: form.f_fname.value,
                f_lname: form.f_lname.value,
                f_phone: form.f_phone.value,
                f_mobilephone: form.f_mobilephone.value,
                f_email: form.f_email.value,
                f_totaldebt: form.f_totaldebt.value,
                f_whereyoulive: form.f_whereyoulive.value,
                f_city: form.f_city.value,
                f_zip: form.f_zip.value,
                f_comments: form.f_comments.value,
                data1: "clickid_placeholder", // Replace with dynamic value if needed
                data2: "clickid_placeholder", // Replace with dynamic value if needed
                f_ip: await fetch('https://api.ipify.org?format=json')
                    .then(res => res.json())
                    .then(data => data.ip) // Retrieves the user's public IP address
            };

            try {
                const response = await fetch("https://www.curadebt.com/signup/inlinform/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    const result = await response.json();
                    alert("Lead added successfully!");
                    console.log(result);
                } else {
                    alert("Failed to add lead: " + response.status);
                    console.error("Error:", response.status, response.statusText);
                }
            } catch (error) {
                alert("An error occurred. Check the console for details.");
                console.error("Error occurred while adding lead:", error);
            }
        });
    </script>
</body>
</html>
